import {AfterViewChecked, AfterViewInit, Component, Inject, OnInit} from '@angular/core';
import {HttpClient, HttpResponse} from '@angular/common/http';
import {Router} from '@angular/router';
import {Subscription} from 'rxjs';
import {MessengerService} from '../../../MessengerService';
import * as L from 'leaflet';
import {MAT_DIALOG_DATA} from '@angular/material/dialog';

@Component({
  selector: 'app-inicio',
  templateUrl: './inicio.component.html',
  styleUrls: ['./inicio.component.scss']
})
export class InicioComponent implements AfterViewChecked {
  atletas: any;
  atleta: any;
  name: any;
  xml: any;
  flag = true;
  following: any;
  followers: any;
  resp: any;
  private messageSubscription: Subscription;

  constructor(public httpService: HttpClient, private router: Router, private messengerService: MessengerService,
              @Inject(MessengerService) public recibido: MessengerService['usuario']) {
    this.atleta = recibido.usuario;
    this.httpService.post('http://localhost/APIStraviaTec/Usuario/friendsActivity',
      {idusuario: this.atleta.idusuario}).subscribe((resp: HttpResponse<any>) => {this.atletas = resp;
                                                                                  console.log(this.atletas); });
    this.httpService.post('http://localhost/APIStraviaTec/Usuario/getSeguidores',
                                                                           // tslint:disable-next-line:max-line-length
        {Idusuario: this.atleta.idusuario}).subscribe((answ: HttpResponse<any>) => {this.resp = answ[0]; console.log(this.resp); this.followers = this.resp.seguidores ; this.following = this.resp.seguidos; });
    this.xml = '<?xml version="1.0" encoding="UTF-8"?><gpx creator="StravaGPX" version="1.1" xmlns="http://www.topografix.com/GPX/1/1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd http://www.garmin.com/xmlschemas/GpxExtensions/v3 http://www.garmin.com/xmlschemas/GpxExtensionsv3.xsd http://www.garmin.com/xmlschemas/TrackPointExtension/v1 http://www.garmin.com/xmlschemas/TrackPointExtensionv1.xsd http://www.garmin.com/xmlschemas/GpxExtensions/v3 http://www.garmin.com/xmlschemas/GpxExtensionsv3.xsd http://www.garmin.com/xmlschemas/TrackPointExtension/v1 http://www.garmin.com/xmlschemas/TrackPointExtensionv1.xsd"><metadata><name>Jpoint Easy Route</name><author><name>Marcel Soute</name><link href="https://www.strava.com/athletes/374904"/></author><link href="https://www.strava.com/routes/11288996"/></metadata><trk><name>Jpoint Easy Route</name><link href="https://www.strava.com/routes/11288996"/><type>Rit</type><trkseg><trkpt lat="50.026320000000005" lon="5.36174"><ele>393.77</ele></trkpt><trkpt lat="50.02650000275245" lon="5.362534997184399"><ele>396.16</ele></trkpt><trkpt lat="50.026680000000006" lon="5.36333"><ele>397.0</ele></trkpt><trkpt lat="50.02673" lon="5.363740000000001"><ele>397.0</ele></trkpt><trkpt lat="50.02671" lon="5.36432"><ele>398.24</ele></trkpt><trkpt lat="50.02671" lon="5.364330000000001"><ele>398.24</ele></trkpt><trkpt lat="50.02658" lon="5.365290000000001"><ele>402.0</ele></trkpt><trkpt lat="50.026610000000005" lon="5.3663300000000005"><ele>403.31000000000006</ele></trkpt><trkpt lat="50.026755018256075" lon="5.367519989255801"><ele>407.96000000000004</ele></trkpt><trkpt lat="50.02690002434424" lon="5.368709985697061"><ele>411.46000000000004</ele></trkpt><trkpt lat="50.027045018264374" lon="5.369899989323257"><ele>415.47</ele></trkpt><trkpt lat="50.027190000000004" lon="5.371090000000001"><ele>417.00000000000006</ele></trkpt><trkpt lat="50.027330010587306" lon="5.372199993531842"><ele>418.34000000000003</ele></trkpt><trkpt lat="50.027470010587706" lon="5.373309993534823"><ele>419.00000000000006</ele></trkpt><trkpt lat="50.02761" lon="5.374420000000001"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.027680000000004" lon="5.3745"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.02769000000001" lon="5.3745400000000005"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.02798000000001" lon="5.37439"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.028040000000004" lon="5.374300000000001"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.028180000000006" lon="5.37363"><ele>420.61</ele></trkpt><trkpt lat="50.0283" lon="5.372750000000001"><ele>419.32</ele></trkpt><trkpt lat="50.02835" lon="5.37253"><ele>419.75</ele></trkpt><trkpt lat="50.02843000000001" lon="5.372280000000001"><ele>421.00000000000006</ele></trkpt><trkpt lat="50.02845000000001" lon="5.371930000000001"><ele>420.47</ele></trkpt><trkpt lat="50.02845000000001" lon="5.37096"><ele>421.55</ele></trkpt><trkpt lat="50.028490000000005" lon="5.370010000000001"><ele>426.16</ele></trkpt><trkpt lat="50.02853" lon="5.36976"><ele>427.00000000000006</ele></trkpt><trkpt lat="50.02863000000001" lon="5.369230000000001"><ele>428.95000000000005</ele></trkpt><trkpt lat="50.028800000000004" lon="5.368480000000001"><ele>433.22</ele></trkpt><trkpt lat="50.0292450038226" lon="5.367540008653864"><ele>435.68</ele></trkpt><trkpt lat="50.02969" lon="5.3666"><ele>435.76000000000005</ele></trkpt><trkpt lat="50.029990000000005" lon="5.36608"><ele>433.99</ele></trkpt><trkpt lat="50.03062000170289" lon="5.36542000883461"><ele>431.93</ele></trkpt><trkpt lat="50.03125000000001" lon="5.36476"><ele>434.00000000000006</ele></trkpt><trkpt lat="50.03166" lon="5.36441"><ele>437.05000000000007</ele></trkpt><trkpt lat="50.032210000000006" lon="5.3642"><ele>441.00000000000006</ele></trkpt><trkpt lat="50.03242" lon="5.364190000000001"><ele>441.57</ele></trkpt><trkpt lat="50.032680000000006" lon="5.36422"><ele>443.68</ele></trkpt><trkpt lat="50.03316000077169" lon="5.364694995056439"><ele>447.86</ele></trkpt><trkpt lat="50.033640000000005" lon="5.365170000000001"><ele>452.75000000000006</ele></trkpt><trkpt lat="50.03380000000001" lon="5.36538"><ele>454.37000000000006</ele></trkpt><trkpt lat="50.03403" lon="5.36549"><ele>457.77</ele></trkpt><trkpt lat="50.03425000000001" lon="5.365810000000001"><ele>462.43000000000006</ele></trkpt><trkpt lat="50.03435" lon="5.36648"><ele>465.87000000000006</ele></trkpt><trkpt lat="50.03457" lon="5.36674"><ele>468.16</ele></trkpt><trkpt lat="50.035060000148704" lon="5.366695000446353"><ele>472.95000000000005</ele></trkpt><trkpt lat="50.03555" lon="5.366650000000001"><ele>477.66</ele></trkpt><trkpt lat="50.03575000000001" lon="5.366820000000001"><ele>478.33000000000004</ele></trkpt><trkpt lat="50.03576" lon="5.36685"><ele>478.33000000000004</ele></trkpt><trkpt lat="50.03604000144811" lon="5.367409996936073"><ele>481.06000000000006</ele></trkpt><trkpt lat="50.03632" lon="5.367970000000001"><ele>485.00000000000006</ele></trkpt><trkpt lat="50.03665667243083" lon="5.368786655295849"><ele>489.39000000000004</ele></trkpt><trkpt lat="50.03699333913126" lon="5.3696033220442905"><ele>493.19</ele></trkpt><trkpt lat="50.037330000000004" lon="5.37042"><ele>496.26000000000005</ele></trkpt><trkpt lat="50.03730000519547" lon="5.371520000787762"><ele>499.61000000000007</ele></trkpt><trkpt lat="50.03727000000001" lon="5.37262"><ele>500.13000000000005</ele></trkpt><trkpt lat="50.03727000000001" lon="5.37326"><ele>499.00000000000006</ele></trkpt><trkpt lat="50.037760000000006" lon="5.373550000000001"><ele>505.0800000000001</ele></trkpt><trkpt lat="50.03824" lon="5.37398"><ele>510.06000000000006</ele></trkpt><trkpt lat="50.03890500071657" lon="5.374349994946553"><ele>509.58000000000004</ele></trkpt><trkpt lat="50.039570000000005" lon="5.374720000000001"><ele>505.94000000000005</ele></trkpt><trkpt lat="50.039590000000004" lon="5.3747300000000005"><ele>505.94000000000005</ele></trkpt><trkpt lat="50.039950000000005" lon="5.374930000000001"><ele>505.85</ele></trkpt><trkpt lat="50.040400000000005" lon="5.37514"><ele>504.27</ele></trkpt><trkpt lat="50.040870000000005" lon="5.37523"><ele>504.37000000000006</ele></trkpt><trkpt lat="50.04113" lon="5.37506"><ele>504.56</ele></trkpt><trkpt lat="50.041410000000006" lon="5.37504"><ele>505.43000000000006</ele></trkpt><trkpt lat="50.04166000000001" lon="5.374910000000001"><ele>508.27</ele></trkpt><trkpt lat="50.0418" lon="5.37471"><ele>509.38000000000005</ele></trkpt><trkpt lat="50.04204000000001" lon="5.37385"><ele>509.75</ele></trkpt><trkpt lat="50.04234" lon="5.3733"><ele>509.48</ele></trkpt><trkpt lat="50.042590000000004" lon="5.372890000000001"><ele>506.81000000000006</ele></trkpt><trkpt lat="50.04269000000001" lon="5.372660000000001"><ele>505.18000000000006</ele></trkpt><trkpt lat="50.04276" lon="5.372420000000001"><ele>504.09000000000003</ele></trkpt><trkpt lat="50.04276" lon="5.37201"><ele>503.69000000000005</ele></trkpt><trkpt lat="50.04271000000001" lon="5.371740000000001"><ele>503.69000000000005</ele></trkpt><trkpt lat="50.04251000000001" lon="5.371250000000001"><ele>504.0</ele></trkpt><trkpt lat="50.04256" lon="5.3711400000000005"><ele>504.3500000000001</ele></trkpt><trkpt lat="50.04284000329732" lon="5.370260005225388"><ele>505.34</ele></trkpt><trkpt lat="50.04312" lon="5.3693800000000005"><ele>504.37000000000006</ele></trkpt><trkpt lat="50.04334000225572" lon="5.36865000345701"><ele>503.88</ele></trkpt><trkpt lat="50.04356000000001" lon="5.367920000000001"><ele>502.21999999999997</ele></trkpt><trkpt lat="50.04366" lon="5.36772"><ele>501.33000000000004</ele></trkpt><trkpt lat="50.04396500402965" lon="5.366755006039054"><ele>498.36</ele></trkpt><trkpt lat="50.044270000000004" lon="5.3657900000000005"><ele>495.50000000000006</ele></trkpt><trkpt lat="50.044340000000005" lon="5.365690000000001"><ele>495.00000000000006</ele></trkpt><trkpt lat="50.044500000000006" lon="5.365950000000001"><ele>495.20000000000005</ele></trkpt><trkpt lat="50.04469" lon="5.36598"><ele>495.6700000000001</ele></trkpt><trkpt lat="50.04534000010071" lon="5.365860003254285"><ele>499.77000000000004</ele></trkpt><trkpt lat="50.04599000007768" lon="5.365740003258589"><ele>505.25000000000006</ele></trkpt><trkpt lat="50.046640000000004" lon="5.365620000000001"><ele>510.0</ele></trkpt><trkpt lat="50.0474637505585" lon="5.3654850162175896"><ele>516.4000000000001</ele></trkpt><trkpt lat="50.048287500960434" lon="5.365350027801676"><ele>523.78</ele></trkpt><trkpt lat="50.04911125120583" lon="5.3652150347519685"><ele>531.0400000000001</ele></trkpt><trkpt lat="50.04993500129465" lon="5.3650800370681715"><ele>537.52</ele></trkpt><trkpt lat="50.05075875122689" lon="5.364945034749993"><ele>544.27</ele></trkpt><trkpt lat="50.05158250100254" lon="5.364810027797137"><ele>548.97</ele></trkpt><trkpt lat="50.052406250621594" lon="5.364675016209315"><ele>552.0400000000001</ele></trkpt><trkpt lat="50.053230000000006" lon="5.364540000000001"><ele>554.0</ele></trkpt><trkpt lat="50.05333000720345" lon="5.3632450027039935"><ele>553.3100000000001</ele></trkpt><trkpt lat="50.053430000000006" lon="5.36195"><ele>552.4100000000001</ele></trkpt><trkpt lat="50.05349500557196" lon="5.360810001730349"><ele>551.39</ele></trkpt><trkpt lat="50.053560000000004" lon="5.35967"><ele>551.39</ele></trkpt><trkpt lat="50.05346" lon="5.35888"><ele>550.7200000000001</ele></trkpt><trkpt lat="50.05325334613218" lon="5.357659989560017"><ele>550.08</ele></trkpt><trkpt lat="50.05304667947703" lon="5.356439989628331"><ele>548.2600000000001</ele></trkpt><trkpt lat="50.05284" lon="5.35522"><ele>546.0</ele></trkpt><trkpt lat="50.05306" lon="5.3551400000000005"><ele>545.5000000000001</ele></trkpt><trkpt lat="50.05362" lon="5.3548"><ele>544.24</ele></trkpt><trkpt lat="50.054055000427404" lon="5.354470003022211"><ele>544.2800000000001</ele></trkpt><trkpt lat="50.05449" lon="5.35414"><ele>542.22</ele></trkpt><trkpt lat="50.05481" lon="5.353940000000001"><ele>539.19</ele></trkpt><trkpt lat="50.05523" lon="5.353750000000001"><ele>537.0500000000001</ele></trkpt><trkpt lat="50.055690000000006" lon="5.353680000000001"><ele>533.33</ele></trkpt><trkpt lat="50.05634500018157" lon="5.3537749987238445"><ele>527.05</ele></trkpt><trkpt lat="50.057" lon="5.353870000000001"><ele>519.9200000000001</ele></trkpt><trkpt lat="50.05729" lon="5.353940000000001"><ele>516.59</ele></trkpt><trkpt lat="50.057300000000005" lon="5.353940000000001"><ele>516.59</ele></trkpt><trkpt lat="50.057840000000006" lon="5.35409"><ele>512.49</ele></trkpt><trkpt lat="50.0583" lon="5.354310000000001"><ele>508.85</ele></trkpt><trkpt lat="50.0587" lon="5.35437"><ele>504.37000000000006</ele></trkpt><trkpt lat="50.05917" lon="5.354380000000001"><ele>500.29</ele></trkpt><trkpt lat="50.060030000000005" lon="5.354360000000001"><ele>497.56000000000006</ele></trkpt><trkpt lat="50.060230000000004" lon="5.354410000000001"><ele>497.13</ele></trkpt><trkpt lat="50.060460000000006" lon="5.3546000000000005"><ele>495.22</ele></trkpt><trkpt lat="50.060820000853006" lon="5.3550249969017925"><ele>491.32000000000005</ele></trkpt><trkpt lat="50.06118000000001" lon="5.35545"><ele>486.00000000000006</ele></trkpt><trkpt lat="50.06086000134226" lon="5.356025003975476"><ele>479.1</ele></trkpt><trkpt lat="50.06054" lon="5.3566"><ele>475.30000000000007</ele></trkpt><trkpt lat="50.06045" lon="5.3567800000000005"><ele>474.58000000000004</ele></trkpt><trkpt lat="50.060410000000005" lon="5.356920000000001"><ele>474.29</ele></trkpt><trkpt lat="50.06045" lon="5.35709"><ele>473.22</ele></trkpt><trkpt lat="50.060570000000006" lon="5.357080000000001"><ele>473.24000000000007</ele></trkpt><trkpt lat="50.06082000000001" lon="5.356890000000001"><ele>471.96000000000004</ele></trkpt><trkpt lat="50.061020000000006" lon="5.356820000000001"><ele>470.69000000000005</ele></trkpt><trkpt lat="50.06141" lon="5.3568500000000006"><ele>468.30000000000007</ele></trkpt><trkpt lat="50.06167000000001" lon="5.35695"><ele>466.51000000000005</ele></trkpt><trkpt lat="50.061730000000004" lon="5.3571800000000005"><ele>465.56</ele></trkpt><trkpt lat="50.061710000000005" lon="5.357340000000001"><ele>465.21</ele></trkpt><trkpt lat="50.061580000000006" lon="5.357740000000001"><ele>461.5400000000001</ele></trkpt><trkpt lat="50.061550000000004" lon="5.35822"><ele>458.29</ele></trkpt><trkpt lat="50.061730000000004" lon="5.35862"><ele>456.62</ele></trkpt><trkpt lat="50.061980000000005" lon="5.35867"><ele>453.70000000000005</ele></trkpt><trkpt lat="50.062450000000005" lon="5.35857"><ele>450.05000000000007</ele></trkpt><trkpt lat="50.06288000000001" lon="5.3584000000000005"><ele>447.6</ele></trkpt><trkpt lat="50.063590000000005" lon="5.357970000000001"><ele>442.05000000000007</ele></trkpt><trkpt lat="50.06382000000001" lon="5.358040000000001"><ele>440.25</ele></trkpt><trkpt lat="50.063900000000004" lon="5.358180000000001"><ele>438.88000000000005</ele></trkpt><trkpt lat="50.06371000000001" lon="5.35841"><ele>436.58000000000004</ele></trkpt><trkpt lat="50.063700000000004" lon="5.358580000000001"><ele>436.34000000000003</ele></trkpt><trkpt lat="50.063750000000006" lon="5.35874"><ele>435.72</ele></trkpt><trkpt lat="50.06385" lon="5.358820000000001"><ele>434.70000000000005</ele></trkpt><trkpt lat="50.064620000000005" lon="5.358910000000001"><ele>428.00000000000006</ele></trkpt><trkpt lat="50.06512000000001" lon="5.35888"><ele>426.3500000000001</ele></trkpt><trkpt lat="50.06552000000001" lon="5.3589400000000005"><ele>425.32000000000005</ele></trkpt><trkpt lat="50.06575" lon="5.358910000000001"><ele>424.3500000000001</ele></trkpt><trkpt lat="50.065760000000004" lon="5.358910000000001"><ele>421.78000000000003</ele></trkpt><trkpt lat="50.06627500157375" lon="5.359484993997634"><ele>416.13000000000005</ele></trkpt><trkpt lat="50.066790000000005" lon="5.360060000000001"><ele>415.15000000000003</ele></trkpt><trkpt lat="50.066900000000004" lon="5.360180000000001"><ele>416.91</ele></trkpt><trkpt lat="50.06714" lon="5.360620000000001"><ele>421.58</ele></trkpt><trkpt lat="50.067220000000006" lon="5.3607700000000005"><ele>422.48</ele></trkpt><trkpt lat="50.067280000000004" lon="5.360950000000001"><ele>423.61</ele></trkpt><trkpt lat="50.06734" lon="5.361140000000001"><ele>424.44000000000005</ele></trkpt><trkpt lat="50.067400000000006" lon="5.36162"><ele>427.21000000000004</ele></trkpt><trkpt lat="50.06743" lon="5.36179"><ele>428.40000000000003</ele></trkpt><trkpt lat="50.067420000000006" lon="5.362590000000001"><ele>433.3</ele></trkpt><trkpt lat="50.067420000000006" lon="5.3628"><ele>434.03000000000003</ele></trkpt><trkpt lat="50.067640000000004" lon="5.3637500000000005"><ele>435.41</ele></trkpt><trkpt lat="50.067690000000006" lon="5.36395"><ele>435.97</ele></trkpt><trkpt lat="50.067930000000004" lon="5.3643600000000005"><ele>439.01</ele></trkpt><trkpt lat="50.06801" lon="5.3645000000000005"><ele>440.45000000000005</ele></trkpt><trkpt lat="50.06823000000001" lon="5.364590000000001"><ele>443.16</ele></trkpt><trkpt lat="50.06835" lon="5.36465"><ele>444.32000000000005</ele></trkpt><trkpt lat="50.0688" lon="5.3646"><ele>443.85</ele></trkpt><trkpt lat="50.068920000000006" lon="5.364590000000001"><ele>443.20000000000005</ele></trkpt><trkpt lat="50.069160000000004" lon="5.36476"><ele>443.82000000000005</ele></trkpt><trkpt lat="50.069280000000006" lon="5.364850000000001"><ele>443.91</ele></trkpt><trkpt lat="50.06942" lon="5.365100000000001"><ele>444.85</ele></trkpt><trkpt lat="50.06949" lon="5.36523"><ele>444.92</ele></trkpt><trkpt lat="50.06982252144366" lon="5.366519973172468"><ele>450.92</ele></trkpt><trkpt lat="50.07015502859252" lon="5.367809964232982"><ele>453.21000000000004</ele></trkpt><trkpt lat="50.07048752144621" lon="5.369099973181233"><ele>460.0</ele></trkpt><trkpt lat="50.070820000000005" lon="5.37039"><ele>463.58000000000004</ele></trkpt><trkpt lat="50.070870000000006" lon="5.370590000000001"><ele>463.21</ele></trkpt><trkpt lat="50.070930000000004" lon="5.37169"><ele>465.5</ele></trkpt><trkpt lat="50.07095" lon="5.371880000000001"><ele>466.33000000000004</ele></trkpt><trkpt lat="50.07085667699511" lon="5.372976670969916"><ele>468.6</ele></trkpt><trkpt lat="50.0707633436588" lon="5.3740733376713505"><ele>467.90000000000003</ele></trkpt><trkpt lat="50.07067000000001" lon="5.375170000000001"><ele>469.74</ele></trkpt><trkpt lat="50.070660000000004" lon="5.375380000000001"><ele>470.38</ele></trkpt><trkpt lat="50.07079" lon="5.37635"><ele>469.80000000000007</ele></trkpt><trkpt lat="50.070820000000005" lon="5.376550000000001"><ele>469.53000000000003</ele></trkpt><trkpt lat="50.07121" lon="5.3771"><ele>463.4800000000001</ele></trkpt><trkpt lat="50.071310000000004" lon="5.3772400000000005"><ele>461.0</ele></trkpt><trkpt lat="50.07155" lon="5.377700000000001"><ele>454.74</ele></trkpt><trkpt lat="50.07164" lon="5.37786"><ele>452.17</ele></trkpt><trkpt lat="50.07181500400761" lon="5.378829996273524"><ele>447.14000000000004</ele></trkpt><trkpt lat="50.07199000000001" lon="5.3798"><ele>440.55000000000007</ele></trkpt><trkpt lat="50.072030000000005" lon="5.380000000000001"><ele>439.50000000000006</ele></trkpt><trkpt lat="50.07206000225779" lon="5.380724999550445"><ele>438.25</ele></trkpt><trkpt lat="50.07209" lon="5.38145"><ele>437.94000000000005</ele></trkpt><trkpt lat="50.072100000000006" lon="5.38166"><ele>437.25</ele></trkpt><trkpt lat="50.07217000000001" lon="5.382020000000001"><ele>436.35</ele></trkpt><trkpt lat="50.072210000000005" lon="5.382210000000001"><ele>435.05</ele></trkpt><trkpt lat="50.072410000000005" lon="5.382840000000001"><ele>430.02</ele></trkpt><trkpt lat="50.07246000000001" lon="5.383"><ele>428.31</ele></trkpt><trkpt lat="50.072480000000006" lon="5.3832"><ele>427.08</ele></trkpt><trkpt lat="50.07251" lon="5.383400000000001"><ele>426.57000000000005</ele></trkpt><trkpt lat="50.07247667508317" lon="5.38439000145896"><ele>423.77000000000004</ele></trkpt><trkpt lat="50.07244334174703" lon="5.385380001541757"><ele>423.00000000000006</ele></trkpt><trkpt lat="50.072410000000005" lon="5.38637"><ele>426.61</ele></trkpt><trkpt lat="50.072410000000005" lon="5.386570000000001"><ele>427.49</ele></trkpt><trkpt lat="50.072430000000004" lon="5.3867400000000005"><ele>427.23</ele></trkpt><trkpt lat="50.07246000000001" lon="5.386920000000001"><ele>426.94000000000005</ele></trkpt><trkpt lat="50.07273000000001" lon="5.388190000000001"><ele>418.55</ele></trkpt><trkpt lat="50.072770000000006" lon="5.388380000000001"><ele>417.41</ele></trkpt><trkpt lat="50.07276" lon="5.388540000000001"><ele>416.89000000000004</ele></trkpt><trkpt lat="50.072700000000005" lon="5.38867"><ele>417.63000000000005</ele></trkpt><trkpt lat="50.072050000000004" lon="5.38844"><ele>433.53000000000003</ele></trkpt><trkpt lat="50.07193" lon="5.388400000000001"><ele>435.55</ele></trkpt><trkpt lat="50.071202000922504" lon="5.388169986038221"><ele>442.38000000000005</ele></trkpt><trkpt lat="50.07047400139054" lon="5.38793997905987"><ele>447.57</ele></trkpt><trkpt lat="50.06974600140414" lon="5.387709979064559"><ele>452.27000000000004</ele></trkpt><trkpt lat="50.069018000963304" lon="5.387479986051903"><ele>452.83</ele></trkpt><trkpt lat="50.068290000000005" lon="5.387250000000001"><ele>459.25000000000006</ele></trkpt><trkpt lat="50.06817" lon="5.3872100000000005"><ele>460.94</ele></trkpt><trkpt lat="50.06749666788261" lon="5.387583343805365"><ele>462.92</ele></trkpt><trkpt lat="50.06682333456785" lon="5.38795667712821"><ele>468.12</ele></trkpt><trkpt lat="50.06615000000001" lon="5.388330000000001"><ele>472.03000000000003</ele></trkpt><trkpt lat="50.066030000000005" lon="5.388400000000001"><ele>473.38</ele></trkpt><trkpt lat="50.06519" lon="5.38856"><ele>483.6</ele></trkpt><trkpt lat="50.065070000000006" lon="5.388590000000001"><ele>483.83000000000004</ele></trkpt><trkpt lat="50.06437000019678" lon="5.388419995025795"><ele>486.26</ele></trkpt><trkpt lat="50.06367000014527" lon="5.3882499950133775"><ele>493.54</ele></trkpt><trkpt lat="50.06297000000001" lon="5.38808"><ele>500.6400000000001</ele></trkpt><trkpt lat="50.06284" lon="5.388050000000001"><ele>501.97</ele></trkpt><trkpt lat="50.06213666798507" lon="5.388446678316959"><ele>504.88</ele></trkpt><trkpt lat="50.0614333346184" lon="5.388843345002213"><ele>510.44</ele></trkpt><trkpt lat="50.06073000000001" lon="5.38924"><ele>515.5300000000001</ele></trkpt><trkpt lat="50.060610000000004" lon="5.3893200000000006"><ele>516.6200000000001</ele></trkpt><trkpt lat="50.06007000041619" lon="5.389575002805641"><ele>523.0400000000001</ele></trkpt><trkpt lat="50.05953" lon="5.389830000000001"><ele>526.88</ele></trkpt><trkpt lat="50.05942" lon="5.38989"><ele>527.93</ele></trkpt><trkpt lat="50.05861000060716" lon="5.389509993578282"><ele>536.42</ele></trkpt><trkpt lat="50.05780000000001" lon="5.389130000000001"><ele>539.75</ele></trkpt><trkpt lat="50.057680000000005" lon="5.389080000000001"><ele>540.82</ele></trkpt><trkpt lat="50.05687500000467" lon="5.389019998992528"><ele>543.32</ele></trkpt><trkpt lat="50.056070000000005" lon="5.388960000000001"><ele>550.08</ele></trkpt><trkpt lat="50.05594000000001" lon="5.38895"><ele>550.67</ele></trkpt><trkpt lat="50.055730000000004" lon="5.38869"><ele>553.59</ele></trkpt><trkpt lat="50.05563" lon="5.3885700000000005"><ele>554.73</ele></trkpt><trkpt lat="50.05536500490847" lon="5.387499994052139"><ele>560.19</ele></trkpt><trkpt lat="50.0551" lon="5.386430000000001"><ele>562.25</ele></trkpt><trkpt lat="50.055060000000005" lon="5.386240000000001"><ele>562.8700000000001</ele></trkpt><trkpt lat="50.05482000000001" lon="5.385730000000001"><ele>564.5100000000001</ele></trkpt><trkpt lat="50.054750000000006" lon="5.38557"><ele>565.07</ele></trkpt><trkpt lat="50.05411250216505" lon="5.385159983658163"><ele>565.5600000000001</ele></trkpt><trkpt lat="50.05347500288584" lon="5.3847499782106825"><ele>565.82</ele></trkpt><trkpt lat="50.05283750216245" lon="5.384339983657046"><ele>568.45</ele></trkpt><trkpt lat="50.052200000000006" lon="5.38393"><ele>569.6</ele></trkpt><trkpt lat="50.052080000000004" lon="5.383850000000001"><ele>573.4</ele></trkpt><trkpt lat="50.05196" lon="5.38379"><ele>574.0</ele></trkpt><trkpt lat="50.05232000670356" lon="5.3829066799200715"><ele>573.13</ele></trkpt><trkpt lat="50.05268000670364" lon="5.3820233465867435"><ele>572.88</ele></trkpt><trkpt lat="50.05304" lon="5.38114"><ele>571.4100000000001</ele></trkpt><trkpt lat="50.05315" lon="5.380750000000001"><ele>571.0</ele></trkpt><trkpt lat="50.05301000000001" lon="5.38072"><ele>570.57</ele></trkpt><trkpt lat="50.0525" lon="5.38079"><ele>569.97</ele></trkpt><trkpt lat="50.05199" lon="5.3809000000000005"><ele>569.0</ele></trkpt><trkpt lat="50.051390000000005" lon="5.3811100000000005"><ele>568.1700000000001</ele></trkpt><trkpt lat="50.05070500023661" lon="5.381315002909311"><ele>565.86</ele></trkpt><trkpt lat="50.05002" lon="5.38152"><ele>563.7</ele></trkpt><trkpt lat="50.049440000000004" lon="5.381810000000001"><ele>562.03</ele></trkpt><trkpt lat="50.04945000000001" lon="5.381810000000001"><ele>562.03</ele></trkpt><trkpt lat="50.04921" lon="5.38185"><ele>561.61</ele></trkpt><trkpt lat="50.04896" lon="5.3817900000000005"><ele>561.0400000000001</ele></trkpt><trkpt lat="50.04838500025439" lon="5.381529996868783"><ele>559.0500000000001</ele></trkpt><trkpt lat="50.047810000000005" lon="5.381270000000001"><ele>557.5</ele></trkpt><trkpt lat="50.047275000391124" lon="5.381039997506715"><ele>556.4100000000001</ele></trkpt><trkpt lat="50.04674000000001" lon="5.38081"><ele>554.6500000000001</ele></trkpt><trkpt lat="50.04636000000001" lon="5.3807"><ele>553.42</ele></trkpt><trkpt lat="50.04601" lon="5.3806400000000005"><ele>551.69</ele></trkpt><trkpt lat="50.04537333333168" lon="5.3807233355520205"><ele>548.7200000000001</ele></trkpt><trkpt lat="50.04473666660369" lon="5.380806668893344"><ele>545.83</ele></trkpt><trkpt lat="50.04410000000001" lon="5.380890000000001"><ele>542.33</ele></trkpt><trkpt lat="50.043870000000005" lon="5.380890000000001"><ele>539.7700000000001</ele></trkpt><trkpt lat="50.043020000000006" lon="5.3806"><ele>536.6</ele></trkpt><trkpt lat="50.042530000123705" lon="5.380469998686594"><ele>534.1100000000001</ele></trkpt><trkpt lat="50.04204000000001" lon="5.38034"><ele>530.7</ele></trkpt><trkpt lat="50.04128000049535" lon="5.380106659287276"><ele>526.96</ele></trkpt><trkpt lat="50.040520000522875" lon="5.379873325962542"><ele>525.22</ele></trkpt><trkpt lat="50.03976" lon="5.37964"><ele>523.5600000000001</ele></trkpt><trkpt lat="50.039550000000006" lon="5.3796100000000004"><ele>523.5600000000001</ele></trkpt><trkpt lat="50.039320000000004" lon="5.3796100000000004"><ele>523.5600000000001</ele></trkpt><trkpt lat="50.038850000000004" lon="5.37966"><ele>523.0</ele></trkpt><trkpt lat="50.038140000000006" lon="5.37983"><ele>523.0</ele></trkpt><trkpt lat="50.03767500010135" lon="5.379970001350731"><ele>522.3500000000001</ele></trkpt><trkpt lat="50.03721" lon="5.38011"><ele>521.0</ele></trkpt><trkpt lat="50.03635000025305" lon="5.380335004020689"><ele>521.0</ele></trkpt><trkpt lat="50.03549" lon="5.38056"><ele>485.00000000000006</ele></trkpt><trkpt lat="50.03470500021032" lon="5.3807850036803835"><ele>485.00000000000006</ele></trkpt><trkpt lat="50.03392" lon="5.381010000000001"><ele>485.00000000000006</ele></trkpt><trkpt lat="50.03372" lon="5.38105"><ele>483.69000000000005</ele></trkpt><trkpt lat="50.033100000000005" lon="5.381340000000001"><ele>480.26</ele></trkpt><trkpt lat="50.03298" lon="5.38137"><ele>478.95000000000005</ele></trkpt><trkpt lat="50.03289" lon="5.3814"><ele>478.36000000000007</ele></trkpt><trkpt lat="50.032740000000004" lon="5.381340000000001"><ele>476.17</ele></trkpt><trkpt lat="50.032610000000005" lon="5.381200000000001"><ele>475.0</ele></trkpt><trkpt lat="50.032410000000006" lon="5.38076"><ele>465.0</ele></trkpt><trkpt lat="50.031940000000006" lon="5.380210000000001"><ele>461.26000000000005</ele></trkpt><trkpt lat="50.03160000101166" lon="5.379709996368268"><ele>459.19000000000005</ele></trkpt><trkpt lat="50.03126" lon="5.3792100000000005"><ele>456.94</ele></trkpt><trkpt lat="50.030910001298956" lon="5.378649995841395"><ele>453.92</ele></trkpt><trkpt lat="50.03056" lon="5.37809"><ele>450.0</ele></trkpt><trkpt lat="50.030550000000005" lon="5.37795"><ele>450.0</ele></trkpt><trkpt lat="50.0305" lon="5.3777800000000004"><ele>450.0</ele></trkpt><trkpt lat="50.03034" lon="5.3775200000000005"><ele>450.0</ele></trkpt><trkpt lat="50.030080000000005" lon="5.377190000000001"><ele>444.54</ele></trkpt><trkpt lat="50.02976" lon="5.37689"><ele>440.00000000000006</ele></trkpt><trkpt lat="50.029320000000006" lon="5.37652"><ele>444.00000000000006</ele></trkpt><trkpt lat="50.02913" lon="5.37624"><ele>439.64000000000004</ele></trkpt><trkpt lat="50.02888" lon="5.3755500000000005"><ele>433.40000000000003</ele></trkpt><trkpt lat="50.02857" lon="5.375"><ele>428.08</ele></trkpt><trkpt lat="50.02841" lon="5.374840000000001"><ele>425.00000000000006</ele></trkpt><trkpt lat="50.02798000000001" lon="5.37439"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.02769000000001" lon="5.3745400000000005"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.027680000000004" lon="5.3745"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.02761" lon="5.374420000000001"><ele>422.00000000000006</ele></trkpt><trkpt lat="50.02747001058662" lon="5.373309993526299"><ele>419.00000000000006</ele></trkpt><trkpt lat="50.02733001058622" lon="5.372199993523318"><ele>418.34000000000003</ele></trkpt><trkpt lat="50.027190000000004" lon="5.371090000000001"><ele>417.00000000000006</ele></trkpt><trkpt lat="50.02704501824806" lon="5.36989998918939"><ele>415.47</ele></trkpt><trkpt lat="50.02690002432792" lon="5.3687099855631955"><ele>411.46000000000004</ele></trkpt><trkpt lat="50.02675501823976" lon="5.367519989121937"><ele>407.96000000000004</ele></trkpt><trkpt lat="50.026610000000005" lon="5.3663300000000005"><ele>403.31000000000006</ele></trkpt><trkpt lat="50.02658" lon="5.365290000000001"><ele>402.0</ele></trkpt><trkpt lat="50.02671" lon="5.364380000000001"><ele>398.72</ele></trkpt><trkpt lat="50.02673" lon="5.363740000000001"><ele>397.0</ele></trkpt><trkpt lat="50.02667" lon="5.363250000000001"><ele>397.0</ele></trkpt><trkpt lat="50.026455003812586" lon="5.362304995663864"><ele>395.51000000000005</ele></trkpt><trkpt lat="50.02624" lon="5.36136"><ele>393.0</ele></trkpt></trkseg></trk></gpx>';

  }
  mapa(): void{
    let i = 0;
    for (const atleta in this.atletas){
      const map = L.map('map' + i);
      const tiles = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
        attribution: 'Powered by Straviatec',
        maxZoom: 17
      });
      tiles.addTo(map);
      // tslint:disable-next-line:prefer-const
      let gpxHTml;
      gpxHTml = new L.GPX(this.atletas[i].mapa, {
        async: true,
        polyline_options: {
          color: 'orange',
          opacity: 0.75,
          weight: 3,
          lineCap: 'round'
        }
      }).on('loaded', e => {
        map.fitBounds(e.target.getBounds());
      });
      gpxHTml.addTo(map);
      i++;
    }
  }


  ngAfterViewChecked(): void {
    if (this.flag) {
      try {
        this.mapa();
      } catch (Exception) {
        this.flag = false;
      }
    }
  }


}
